{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% load static %}

{% block head_title %}{{ post.title }}{% endblock %}

{% block content %}
<!-- <div class="container-fluid my-5">
    <div class="row">
        <div class="col-lg-6 offset-lg-3">
            <div class="card">
                <h2 class="card-title text-center my-3">{{ post.title }}</h2>
                <div class="text-muted text-center mb-3">
                    <div>
                        created: {{ post.created|date:"N j Y" }},
                        last updated: {{ post.updated|timesince }},
                        by <a class="badge badge-secondary" href="{% url 'users:my_profile' %}">{{ post.author }}</a>
                    </div>
                    <div>
                        {% if post.tags.all %}
                        <p class="tags">
                            Tags:
                            {% for tag in post.tags.all %}
                            <a href="{% url "blog:post_list_by_tag" tag.slug %}">
                                <strong>{{ tag.name }}</strong>
                            </a>
                            {% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
                        {% endif %}
                     
                    </div>
                </div>
                {% if post.image %}
                <img class="card-img-top" src="{{ post.image.url }}" alt="{{ post.title }}">
                {% endif %}
                {% if post.author == request.user %}
                <div class="mt-4 mx-3">
                    <a class="btn btn-primary" href="{% url 'blog:post_update' post.id %}">Edit Post</a>
                    <a class="btn btn-primary" href="{% url 'blog:post_delete' post.id %}">Delete Post</a>
                </div>
                {% endif %}
                <div class="card-text mt-5 p-4">
                    {{ post.body }}
                </div>
                <p class="card-text mt-4 p-4">
                    Similar posts:
                    {% for post in similar_posts %}
                    <a href="{{ post.get_absolute_url }}"><strong>{{ post.title }}</strong></a>
                    {% if not forloop.last %}, {% endif %}
                    {% empty %}
                    There are no similar Post yet
                    {% endfor %}
                </p>
            </div>
        </div>
    </div> -->

<!-- {% if comments %}
    <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3">
            Comment{{ comments.count|pluralize }}
            <span class="badge badge-dark ml-2">{{ comments.count }}</span>
        </div>
        {% for comment in comments %}
        <div class="col-lg-6 offset-lg-3 mt-2">
            <div class="card p-2">
                <div class="row">
                    <div class="col-12">
                        <img class="rounded-circle mr-2" src="{{ comment.image.url }}" alt="Avatar">
                        <strong>{{ comment.name }}</strong> said
                    </div>
                    <div class="col-12">
                        <p class="m-1 mt-3">{{ comment.body }}</p>
                        <p class="text-right text-muted"><small>{{ comment.created }}</small></p>
                    </div>
                </div>
            </div>
        </div>

        {% endfor %}
    </div>

    {% else %}
    <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3 mt-2">
            <div class="card p-2">
                <div class="row">
                    <div class="col-12">
                        <strong>
                            <p>No comments here yet :(</p>
                        </strong>
                    </div>

                </div>
            </div>
        </div>
    </div>

    {% endif %} -->

<!-- Form to leave comment -->
<!-- <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3">
            <h3>Leave a comment</h3>
            <form method='POST'>
                {% csrf_token %}
                {{ comment_form|crispy }}

                <button class="btn btn-primary ml-2" type="submit">Reply</button>
            </form>
        </div>
    </div> -->

<!-- <h2>Similar posts</h2>
{% for post in similar_posts %}
<p>
    <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
</p>
{% empty %}
There are no similar Post yet
{% endfor %}

</div> -->





<div class="container-fluid my-5">
    {% include "messages/message.html" %}
    <div class="row mx-0" id="sRiWKmlfTSpF">
        <div class="col-lg-6 col-12 offset-lg-3" id="KIsdkQSKQklm">
            This website is made possible by displaying online advertisements to our visitors.<br>
            Please consider supporting us by disabling your ad blocker.
        </div>
    </div>

    <div class="row">

        <aside class="col-lg-3 d-none d-lg-block" id="myScrollspy">
            <div class="list-group">
                <!-- <h4 class="bg-white mb-0 py-3 pl-3 text-info">TABLE OF CONTENTS</h4>

                <a class="list-group-item list-group-item-action" href="#read-an-image-cv2imread">Read an Image
                    (cv2.imread)</a>

                <a class="list-group-item list-group-item-action" href="#display-an-image-cv2imshow">Display an Image
                    (cv2.imshow)</a>

                <a class="list-group-item list-group-item-action" href="#write-an-image-cv2imwrite">Write an Image
                    (cv2.imwrite)</a>

                <a class="list-group-item list-group-item-action" href="#summary">Summary</a>

                <a class="list-group-item list-group-item-action text-info" href="#comment">Leave a comment</a>
            </div> -->
        </aside>


        <div class="col-lg-6  col-12 main">
            <div class="card-body">

                <h1 class="card-title text-center mb-3 mt-0 h2 h2-sm">{{ post.title }}</h1>
                <div class="text-muted text-center mb-3">
                    <div class="mb-2">
                        <span class="badge badge-secondary mr-2">
                            <i class="fas fa-calendar-alt mr-2"><span
                                    class='mr-1'></span>{{ post.created|date:"N j Y" }},</i>
                        </span>

                        <a class="badge badge-secondary user" href="{% url 'users:my_profile' %}">
                            <i class="fas fa-user-edit mr-2">
                                <span class='mr-1'></span>>{{ post.author }}
                            </i>
                        </a>

                    </div>
                    <div>
                        {% if post.tags.all %}
                        {% for tag in post.tags.all %}
                        <a href="{% url "blog:post_list_by_tag" tag.slug %}">
                            <span class="badge badge-info"><i class="fas fa-tag mr-1"></i>{{ tag.name }}</span>
                        </a>
                        {% endfor %}
                        {% endif %}

                    </div>
                </div>
                {% if post.image %}
                <img class="card-img-top" src="{{ post.image.url }}" alt="{{ post.title }}">
                {% endif %}
                <div class="card-text mt-5 ">
                    <p>
                        {{ post.body | safe }}
                    </p>
                </div>


            </div>
        </div>



        <div class='col-lg-3 mt-5'>


            <!-- <aside class="row">
                <div class="col-12 text-center">
                    <p style="color: #59595a; margin-bottom: 5px"><strong>Recent Post</strong></p>
                    <a href="https://linode.gvw92c.net/c/2911568/939229/10906" target="_blank" rel=”noopener”
                        id="939229">
                        <img src="/static/img/more/linode-300*250.webp" loading="lazy" border="0" alt="" />
                    </a>
                    <img height="0" width="0" src="https://imp.pxf.io/i/2911568/939229/10906" loading="lazy"
                        style="position:absolute;visibility:hidden;" border="0" />
                </div>
            </aside> -->
            <!-- Search bar -->
            <aside class="main p-3 p-sm-4 mt-4 d-none d-lg-block d-xl-block">
                {% include "components/sidebar/search.html" %}

            </aside>



            <!-- Recent Posts -->
            <aside class='mt-3 d-none d-lg-block d-xl-block'>
                <div class='row main mx-1'>
                    <h4 class="text-info">Recent Posts</h4>
                    {% for post in similar_posts %}

                    <a class="list-group-item list-group-item-action"
                        href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                    {% endfor %}

                </div>
            </aside>

            <!-- Books -->
            <aside class="main p-3 p-sm-4 mt-4">
                {% include "components/sidebar/recommended_post.html" %}

            </aside>


            <aside class="row mt-4 d-none d-lg-block d-xl-block" style="position: sticky; top: 90px;">
                <div class="col-12 text-center">
                    <p style="color: #59595a; margin-bottom: 5px"><strong>Sponsored</strong></p>
                    <a href="https://datacamp.pxf.io/c/2911568/1172967/13294" target="_blank" rel=”noopener”
                        id="1172967">
                        <img src="/static/img/more/datacamp-promo-300*600.webp" loading="lazy" border="0" alt="" />
                    </a>
                    <img height="0" width="0" src="https://imp.pxf.io/i/2911568/1172967/13294" loading="lazy"
                        style="position:absolute;visibility:hidden;" border="0" />
                </div>
            </aside>
            <div class="row"></div>
        </div>
    </div>

    <!-- <div class='row mt-4'>

        <a class='main col-lg-3 offset-lg-3 col-12 mr-1'
            href='/post/transfer-learning-with-keras-tensorflow-and-python/'>
            <h6>Previous Article</h6>
            <img src='/media/transfer-learning-with-keras-tensorflow-and-python_.webp'
                alt="Transfer Learning with Keras, TensorFlow, and Python" loading="lazy" />
            <h4 class='mt-2'>Transfer Learning with Keras, TensorFlow, and Python</h4>
        </a>


        <a class='main p-3 col-lg-3 col-12 ' href='/post/how-to-read-and-write-videos-with-opencv/'>
            <h6 class='text-right'>Next Article</h6>
            <img src='/media/how-to-read-and-write-videos-with-opencv.webp'
                alt="How to Read and Write Videos with OpenCV  and Python" loading="lazy" />
            <h4 class='mt-2'>How to Read and Write Videos with OpenCV and Python</h4>
        </a>

    </div> -->

    <!-- Mailchimp Signup -->
    <!-- <div class='row pt-3'>
      <div class='col-lg-6 col-12 offset-lg-3 main'>
        <div class='row p-3'>
          <div class='col-12'>
              <link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
              <style type="text/css">
                #mc_embed_signup{background:#fff; clear:left; font:20px Helvetica,Arial,sans-serif; }
              </style>
              <div id="mc_embed_signup">
              <form action="https://dontrepeatyourself.us1.list-manage.com/subscribe/post?u=4d5977b2cc2b89a60c15a28de&amp;id=c381e776f4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" rel=”noopener” novalidate>
                  <div id="mc_embed_signup_scroll">
                <label style="font-size: 28px;" for="mce-EMAIL">Subscribe</label>
                <p>Join the mailing list to be notified about new posts and updates.</p>
                <input type="email" value="" name="EMAIL" class="email w-100" id="mce-EMAIL" placeholder="email address" required>
                  <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_4d5977b2cc2b89a60c15a28de_c381e776f4" tabindex="-1" value=""></div>
                  <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-sm btn-primary mt-3 subscribe"></div>
                  </div>
              </form>
              </div>
          </div>
        </div>
      </div>
    </div> -->


    <!-- List of comments -->
    <!-- {% if comments %}
    <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3">
            Comment{{ comments.count|pluralize }}
            <span class="badge badge-dark ml-2">{{ comments.count }}</span>
        </div>
        {% for comment in comments %}
        <div class="col-lg-6 offset-lg-3 mt-2">
            <div class="card p-2">
                <div class="row">
                    <div class="col-12">
                        <img class="rounded-circle mr-2" src="{% static 'img/avatar.svg' %}" alt="Avatar">
                        <strong>{{ comment.name }}</strong> said
                    </div>
                    <div class="col-12">
                        <p class="m-1 mt-3">{{ comment.body }}</p>
                        <p class="text-right text-muted"><small>{{ comment.created }}</small></p>
                    </div>
                </div>
            </div>
        </div>

        {% endfor %}
    </div>

    {% else %}
    <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3 mt-2">
            <div class="card p-2">
                <div class="row">
                    <div class="col-12">
                        <strong>
                            <p>No comments here yet :(</p>
                        </strong>
                    </div>

                </div>
            </div>
        </div>
    </div>

    {% endif %} -->

    <!-- List of comments -->
    {% if comments %}

    <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3">
            Comments
            <span class="badge badge-pill badge-secondary ml-2"> {{ comments.count }}</span>
        </div>
        {% for comment in comments %}
        <div class="col-lg-6 offset-lg-3 mt-2 bg-white">

            <div class="row mt-1 comment">

                <div class="col-12 my-2">
                    <img class="mr-2 avatar" src="{{ comment.image.url }}" alt="Avatar" loading="lazy">
                    <strong>{{ comment.name }}</strong> said
                </div>
                <div class="col-12">
                    <p class="m-1 mt-3  pre-comment">{{ comment.body }}</p>
                    <p class="text-right text-muted"><small><i class="far fa-clock mr-1"></i>{{ comment.created }}
                        </small></p>
                </div>

            </div>
        </div>
        {% endfor %}

    </div>
    {% endif %}


    <!-- Form to leave comment -->



    <div class="row mt-5">
        <div class="col-lg-6 offset-lg-3 main">
            <h3 id="comment">Leave a comment</h3>
            <form method='POST'>
                {% csrf_token %}
                {{ comment_form|crispy }}

                <button class="btn btn-primary ml-2" type="submit">Leave a comment</button>
            </form>
            <!-- <form method='POST'>
                <input type="hidden" name="csrfmiddlewaretoken"
                    value="bXSrL9e8Y85HNueT6s12rbMkNTmYFziLDnxIU87uXGYIAWAft2RcCUMPErDhFkKG">
                <div class="form-group">
                    <span class="ml-2"></span><label for="id_name">Name:</label>
                    <input type="text" class="form-control " id="id_name" name="name" placeholder="Your name" value="">

                </div>
                <div class="form-group">
                    <span class="ml-2"></span>
                    <label for="id_email">Email:</label>
                    <span class="text-muted"><small>(Your email address will not be published)</small></span>
                    <input type="text" class="form-control " id="id_email" name="email" placeholder="Your email"
                        value="">

                </div>
                <div class="form-group">
                    <span class="ml-2"></span><label for="id_content">Content:</label>
                    <textarea class="form-control " id="id_content" name="content" rows="4"></textarea>

                </div>
                <button class="btn btn-primary ml-2" type="submit">Leave a comment</button>
            </form> -->
        </div>
    </div>

</div>





{% endblock content %}